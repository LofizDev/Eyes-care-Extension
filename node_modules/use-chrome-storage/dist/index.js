var e=require("react");function t(t,r,o){const[n]=e.useState(()=>"function"==typeof r?r():r),[c]=e.useState(o),[s,u]=e.useState(n),[a,f]=e.useState(!0),[i,h]=e.useState("");e.useEffect(()=>{((e,t,r)=>{const o=void 0===t?e:{[e]:t};return new Promise((t,n)=>{chrome.storage[r].get(o,r=>{const o=chrome.runtime.lastError;if(o)return n(o);t(r[e])})})})(t,n,c).then(e=>{u(e),f(!0),h("")}).catch(e=>{f(!1),h(e)})},[t,n,c]);const m=e.useCallback(e=>{const r="function"==typeof e?e(s):e;((e,t,r)=>new Promise((o,n)=>{chrome.storage[r].set({[e]:t},()=>{const e=chrome.runtime.lastError;e?n(e):o()})}))(t,r,c).then(()=>{f(!0),h("")}).catch(e=>{u(r),f(!1),h(e)})},[c,t,s]);return e.useEffect(()=>{const e=(e,r)=>{r===c&&t in e&&(u(e[t].newValue),f(!0),h(""))};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}},[t,c]),[s,m,a,i]}function r(r,o,n){const c=[];return function(){const[s,u,a,f]=t(r,o,n),i=e.useCallback(e=>{for(const t of c)t(e)},[]);return e.useEffect(()=>(c.push(u),()=>{c.splice(c.indexOf(u),1)}),[u]),[s,i,a,f]}}exports.createChromeStorageStateHookLocal=function(e,t){return r(e,t,"local")},exports.createChromeStorageStateHookSync=function(e,t){return r(e,t,"sync")},exports.useChromeStorageLocal=function(e,r){return t(e,r,"local")},exports.useChromeStorageSync=function(e,r){return t(e,r,"sync")};
//# sourceMappingURL=index.js.map
