!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e||self).useChromeStorage={},e.react)}(this,function(e,t){function o(e,o,n){const[r]=t.useState(()=>"function"==typeof o?o():o),[c]=t.useState(n),[s,u]=t.useState(r),[a,f]=t.useState(!0),[i,h]=t.useState("");t.useEffect(()=>{((e,t,o)=>{const n=void 0===t?e:{[e]:t};return new Promise((t,r)=>{chrome.storage[o].get(n,o=>{const n=chrome.runtime.lastError;if(n)return r(n);t(o[e])})})})(e,r,c).then(e=>{u(e),f(!0),h("")}).catch(e=>{f(!1),h(e)})},[e,r,c]);const l=t.useCallback(t=>{const o="function"==typeof t?t(s):t;((e,t,o)=>new Promise((n,r)=>{chrome.storage[o].set({[e]:t},()=>{const e=chrome.runtime.lastError;e?r(e):n()})}))(e,o,c).then(()=>{f(!0),h("")}).catch(e=>{u(o),f(!1),h(e)})},[c,e,s]);return t.useEffect(()=>{const t=(t,o)=>{o===c&&e in t&&(u(t[e].newValue),f(!0),h(""))};return chrome.storage.onChanged.addListener(t),()=>{chrome.storage.onChanged.removeListener(t)}},[e,c]),[s,l,a,i]}function n(e,n,r){const c=[];return function(){const[s,u,a,f]=o(e,n,r),i=t.useCallback(e=>{for(const t of c)t(e)},[]);return t.useEffect(()=>(c.push(u),()=>{c.splice(c.indexOf(u),1)}),[u]),[s,i,a,f]}}e.createChromeStorageStateHookLocal=function(e,t){return n(e,t,"local")},e.createChromeStorageStateHookSync=function(e,t){return n(e,t,"sync")},e.useChromeStorageLocal=function(e,t){return o(e,t,"local")},e.useChromeStorageSync=function(e,t){return o(e,t,"sync")}});
//# sourceMappingURL=index.umd.js.map
