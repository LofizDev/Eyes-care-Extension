import{useState as n,useEffect as t,useCallback as r}from"react";function e(e,o,c){const[s]=n(()=>"function"==typeof o?o():o),[u]=n(c),[i,f]=n(s),[a,h]=n(!0),[m,l]=n("");t(()=>{((n,t,r)=>{const e=void 0===t?n:{[n]:t};return new Promise((t,o)=>{chrome.storage[r].get(e,r=>{const e=chrome.runtime.lastError;if(e)return o(e);t(r[n])})})})(e,s,u).then(n=>{f(n),h(!0),l("")}).catch(n=>{h(!1),l(n)})},[e,s,u]);const g=r(n=>{const t="function"==typeof n?n(i):n;((n,t,r)=>new Promise((e,o)=>{chrome.storage[r].set({[n]:t},()=>{const n=chrome.runtime.lastError;n?o(n):e()})}))(e,t,u).then(()=>{h(!0),l("")}).catch(n=>{f(t),h(!1),l(n)})},[u,e,i]);return t(()=>{const n=(n,t)=>{t===u&&e in n&&(f(n[e].newValue),h(!0),l(""))};return chrome.storage.onChanged.addListener(n),()=>{chrome.storage.onChanged.removeListener(n)}},[e,u]),[i,g,a,m]}function o(n,o,c){const s=[];return function(){const[u,i,f,a]=e(n,o,c),h=r(n=>{for(const t of s)t(n)},[]);return t(()=>(s.push(i),()=>{s.splice(s.indexOf(i),1)}),[i]),[u,h,f,a]}}function c(n,t){return e(n,t,"local")}function s(n,t){return e(n,t,"sync")}function u(n,t){return o(n,t,"local")}function i(n,t){return o(n,t,"sync")}export{u as createChromeStorageStateHookLocal,i as createChromeStorageStateHookSync,c as useChromeStorageLocal,s as useChromeStorageSync};
//# sourceMappingURL=index.es.js.map
